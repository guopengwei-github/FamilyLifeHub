# é¦–é¡µä»ªè¡¨ç›˜é‡è®¾è®¡æ–¹æ¡ˆ

**Date:** 2025-02-05
**Status:** Approved
**Designer:** Claude Opus

## æ¦‚è¿°

å®Œå…¨é‡åšé¦–é¡µä»ªè¡¨ç›˜ï¼Œé‡‡ç”¨å¡ç‰‡å¼ä»ªè¡¨ç›˜é£Žæ ¼ï¼Œçªå‡ºå½“å‰ç™»å½•ç”¨æˆ·æ•°æ®ï¼Œæ”¯æŒä½³æ˜Žæ•°æ®å’Œæ‰‹åŠ¨è¾“å…¥æ•°æ®çš„æ··åˆå±•ç¤ºï¼Œæ¯ä¸ªå¡ç‰‡æ”¯æŒç›´æŽ¥æŽ§åˆ¶æ˜¾ç¤º/éšè—ã€‚

---

## æ•´ä½“å¸ƒå±€

### é¡µé¢ç»“æž„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é¡¶éƒ¨å¯¼èˆªæ  (SiteHeader + ç”¨æˆ·åˆ‡æ¢ä¸‹æ‹‰)                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ä¸»å¡ç‰‡ï¼šç”¨æˆ·å¤´åƒ + åç§° + ä»Šæ—¥æ ¸å¿ƒæ•°æ®å¿«ç…§        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ç¡çœ å¡ç‰‡ â”‚ â”‚è¿åŠ¨/å¥åº·â”‚ â”‚ å·¥ä½œå¡ç‰‡ â”‚ â”‚ åŽ‹åŠ›å¡ç‰‡ â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              è¶‹åŠ¿å›¾è¡¨å¡ç‰‡                        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å®¶åº­æˆå‘˜æ¨ªæ¡ (å¯å±•å¼€æŸ¥çœ‹è¯¦æƒ…)                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## å¡ç‰‡è¯¦ç»†è®¾è®¡

### 1. ä¸»å¡ç‰‡ - ç”¨æˆ·æ‘˜è¦ (UserSummaryCard)

**å¸ƒå±€ï¼š**
- å·¦ä¾§ï¼šç”¨æˆ·å¤´åƒ + åç§° + ä»Šæ—¥æ—¥æœŸ
- å³ä¾§ï¼š3-4ä¸ªæ ¸å¿ƒæ•°æ®å¿«ç…§ï¼ˆå¤§æ•°å­— + å›¾æ ‡ï¼‰

**å±•ç¤ºæŒ‡æ ‡ï¼š**
- ç¡çœ æ—¶é•¿
- æ­¥æ•° / å¡è·¯é‡Œ
- å·¥ä½œæ—¶é•¿
- åŽ‹åŠ›æ°´å¹³

---

### 2. ç¡çœ åˆ†æžå¡ç‰‡ (SleepCard)

**è§†è§‰å…ƒç´ ï¼š**
- å¤§æ ‡é¢˜ï¼šæ˜¨æ™šæ€»ç¡çœ æ—¶é•¿ï¼ˆå¦‚ "7å°æ—¶32åˆ†é’Ÿ"ï¼‰
- ç¡çœ é˜¶æ®µæ¡ï¼ˆä¿ç•™çŽ°æœ‰ SleepStagesBarï¼‰
- ç¡çœ è´¨é‡è¯„åˆ†ï¼šåœ†åœˆæ˜¾ç¤º 0-100 åˆ†
- è´¨é‡æ ‡ç­¾ï¼šä¼˜ç§€/è‰¯å¥½/ä¸€èˆ¬/éœ€æ”¹å–„ï¼ˆå¯¹åº”é¢œè‰²ç»¿/é»„/æ©™/çº¢ï¼‰

**æ•°æ®æ¥æºï¼š** ä½³æ˜ŽåŒæ­¥

**æŽ§åˆ¶ï¼š** å³ä¸Šè§’çœ¼ç›å›¾æ ‡

---

### 3. è¿åŠ¨/å¥åº·åˆ‡æ¢å¡ç‰‡ (ActivityHealthCard) - æ ¸å¿ƒæ–°å¢ž

**Tab åˆ‡æ¢ï¼š**
- é¡¶éƒ¨ä¸¤ä¸ª Tabï¼šã€Œè¿åŠ¨ã€å’Œã€Œå¥åº·ã€
- å¹³æ»‘è¿‡æ¸¡åŠ¨ç”»

**è¿åŠ¨ Tab å†…å®¹ï¼š**
| æŒ‡æ ‡ | å±•ç¤ºæ–¹å¼ |
|------|----------|
| å¡è·¯é‡Œæ¶ˆè€— | å¤§æ•°å­— + ç«ç„°å›¾æ ‡ï¼Œè¿›åº¦æ¡æ˜¾ç¤ºç›®æ ‡å®Œæˆåº¦ |
| æ­¥æ•° | å¤§æ•°å­— + è¶³è¿¹å›¾æ ‡ï¼Œç›®æ ‡ç™¾åˆ†æ¯” |
| æ´»åŠ¨æ—¶é•¿ | ä»Šæ—¥æ´»è·ƒåˆ†é’Ÿæ•° |
| è·ç¦» | ç§»åŠ¨è·ç¦»ï¼ˆå…¬é‡Œï¼‰ |

**å¥åº· Tab å†…å®¹ï¼š**
| æŒ‡æ ‡ | å±•ç¤ºæ–¹å¼ |
|------|----------|
| èº«ä½“ç”µé‡ | ç”µæ± å›¾æ ‡ + ç™¾åˆ†æ¯”ï¼Œé¢œè‰²å˜åŒ–ï¼ˆç»¿>80ï¼Œé»„50-80ï¼Œçº¢<50ï¼‰|
| è¡€æ°§é¥±å’Œåº¦ | ç™¾åˆ†æ¯” + è¡€æ»´å›¾æ ‡ |
| å‘¼å¸é¢‘çŽ‡ | æ¬¡/åˆ†é’Ÿ + è‚ºéƒ¨å›¾æ ‡ |
| é™æ¯å¿ƒçŽ‡ | å¿ƒçŽ‡å›¾æ ‡ + BPM |

**æŽ§åˆ¶ï¼š** å³ä¸Šè§’çœ¼ç›å›¾æ ‡

---

### 4. å·¥ä½œæ•°æ®å¡ç‰‡ (WorkCard)

**å±•ç¤ºå†…å®¹ï¼š**
- ä»Šæ—¥å·¥ä½œæ—¶é•¿ï¼šå¤§æ•°å­—
- å¹³å‡ä¸“æ³¨åº¦ï¼š0-100 è¿›åº¦æ¡
- ä»Šæ—¥æ´»è·ƒæ—¶æ®µï¼šçƒ­åŠ›å›¾æ¡ï¼ˆæ—©ä¸­æ™šé¢œè‰²æ·±æµ…ï¼‰

**æŽ§åˆ¶ï¼š** å³ä¸Šè§’çœ¼ç›å›¾æ ‡

---

### 5. åŽ‹åŠ›ä¸Žå¿ƒæƒ…å¡ç‰‡ (StressCard)

**å±•ç¤ºå†…å®¹ï¼š**
- åŽ‹åŠ›æ°´å¹³ï¼š0-100 æ•°å€¼
- åŽ‹åŠ›çŠ¶æ€æ ‡ç­¾ï¼šå¹³é™/åŽ‹åŠ›/é«˜åŽ‹åŠ›
- é¢œè‰²æ¸å˜æ¡ï¼ˆè“=ä½ŽåŽ‹åŠ›ï¼Œçº¢=é«˜åŽ‹åŠ›ï¼‰
- ä¸€æ—¥åŽ‹åŠ›è¶‹åŠ¿ï¼šè¿·ä½ æŠ˜çº¿å›¾

**æŽ§åˆ¶ï¼š** å³ä¸Šè§’çœ¼ç›å›¾æ ‡

---

### 6. è¶‹åŠ¿å›¾è¡¨å¡ç‰‡ (TrendCard)

ä¿æŒçŽ°æœ‰è®¾è®¡ï¼Œä¼˜åŒ–å“åº”å¼å¸ƒå±€ã€‚

---

### 7. å®¶åº­æˆå‘˜æ¨ªæ¡ (FamilyMemberStrip)

**æ”¶èµ·çŠ¶æ€ï¼ˆé»˜è®¤ï¼‰ï¼š**
- æ¨ªå‘æ»šåŠ¨æ¡
- æ¯ä¸ªæˆå‘˜å°å¡ç‰‡ï¼šå¤´åƒ + å§“å + 1ä¸ªå…³é”®æŒ‡æ ‡
- é¼ æ ‡æ‚¬åœæ˜¾ç¤º tooltip

**å±•å¼€çŠ¶æ€ï¼š**
- ç‚¹å‡»åŽä»Žä¸‹æ–¹æ»‘å‡ºå®Œæ•´é¢æ¿
- æ˜¾ç¤ºè¯¥æˆå‘˜æ‰€æœ‰è¯¦ç»†æ•°æ®å¡ç‰‡
- å…³é—­æŒ‰é’®è¿”å›žä¸»è§†å›¾

---

## å¡ç‰‡æŽ§åˆ¶äº¤äº’

### éšè—/æ˜¾ç¤ºé€»è¾‘

1. æ¯ä¸ªå¡ç‰‡å³ä¸Šè§’æœ‰çœ¼ç›å›¾æ ‡ (ðŸ‘ï¸)
2. ç‚¹å‡»åŽå¡ç‰‡æ·¡å‡ºæ¶ˆå¤±ï¼Œå…¶ä»–å¡ç‰‡è‡ªåŠ¨é‡æ–°æŽ’å¸ƒ
3. é¡¶éƒ¨æ·»åŠ "æ˜¾ç¤ºè®¾ç½®"æŒ‰é’®ï¼ˆé½¿è½®å›¾æ ‡ï¼‰
4. å¼¹å‡ºæ‰€æœ‰å¡ç‰‡çš„å‹¾é€‰åˆ—è¡¨ï¼Œå¯æ¢å¤å·²éšè—å¡ç‰‡

### æŒä¹…åŒ–

- ç”¨æˆ·é€‰æ‹©ä¿å­˜åˆ°åŽç«¯ `UserPreference` è¡¨
- æ–°å¢ž `hidden_cards` JSON å­—æ®µ
- åˆ·æ–°é¡µé¢åŽä¿æŒè®¾ç½®

---

## æ•°æ®æ¨¡åž‹æ‰©å±•

### åŽç«¯ HealthMetric æ‰©å±•

```python
# æ–°å¢žå­—æ®µ
steps = Column(Integer, nullable=True)           # æ­¥æ•°
calories = Column(Integer, nullable=True)        # å¡è·¯é‡Œæ¶ˆè€—
distance_km = Column(Float, nullable=True)       # è·ç¦»(å…¬é‡Œ)
body_battery = Column(Integer, nullable=True)    # èº«ä½“ç”µé‡
spo2 = Column(Float, nullable=True)              # è¡€æ°§é¥±å’Œåº¦
respiration_rate = Column(Float, nullable=True)  # å‘¼å¸é¢‘çŽ‡(æ¬¡/åˆ†)
resting_hr = Column(Integer, nullable=True)      # é™æ¯å¿ƒçŽ‡
sleep_score = Column(Integer, nullable=True)     # ç¡çœ è´¨é‡è¯„åˆ†
```

### UserPreference æ‰©å±•

```python
hidden_cards = Column(JSON, nullable=True)       # éšè—çš„å¡ç‰‡IDåˆ—è¡¨
default_view_tab = Column(String, default='activity')  # é»˜è®¤Tab: activity/health
```

---

## API æ–°å¢žç«¯ç‚¹

| ç«¯ç‚¹ | æ–¹æ³• | æè¿° |
|------|------|------|
| `/api/v1/dashboard/summary` | GET | èŽ·å–æ ¸å¿ƒæ•°æ®å¿«ç…§ |
| `/api/v1/user/preferences/hidden-cards` | PUT | æ›´æ–°éšè—å¡ç‰‡åˆ—è¡¨ |

---

## å‰ç«¯ç»„ä»¶æž¶æž„

```
components/dashboard/
â”œâ”€â”€ user-summary-card.tsx          # ä¸»å¡ç‰‡ï¼šç”¨æˆ·ä¿¡æ¯ + æ ¸å¿ƒå¿«ç…§
â”œâ”€â”€ sleep-card.tsx                 # ç¡çœ åˆ†æžå¡ç‰‡ï¼ˆé‡æž„ï¼‰
â”œâ”€â”€ activity-health-card.tsx       # è¿åŠ¨/å¥åº·åˆ‡æ¢å¡ç‰‡
â”œâ”€â”€ work-card.tsx                  # å·¥ä½œæ•°æ®å¡ç‰‡ï¼ˆé‡æž„ï¼‰
â”œâ”€â”€ stress-card.tsx                # åŽ‹åŠ›å¿ƒæƒ…å¡ç‰‡ï¼ˆé‡æž„ï¼‰
â”œâ”€â”€ trend-card.tsx                 # è¶‹åŠ¿å›¾è¡¨ï¼ˆé‡æž„ï¼‰
â”œâ”€â”€ family-member-strip.tsx        # åº•éƒ¨æˆå‘˜æ¨ªæ¡
â”œâ”€â”€ member-detail-panel.tsx        # æˆå‘˜è¯¦æƒ…å±•å¼€é¢æ¿
â””â”€â”€ card-visibility-control.tsx    # å¡ç‰‡æŽ§åˆ¶é€»è¾‘å¤ç”¨
```

### å¡ç‰‡ ID å®šä¹‰

```typescript
export const CARD_IDS = {
  SLEEP: 'sleep',
  ACTIVITY_HEALTH: 'activity_health',
  WORK: 'work',
  STRESS: 'stress',
  TRENDS: 'trends'
} as const;
```

---

## å®žæ–½é¡ºåº

1. **Phase 1 - æ•°æ®å±‚**ï¼šæ‰©å±•åŽç«¯æ¨¡åž‹ã€APIï¼Œæ›´æ–°å‰ç«¯ç±»åž‹
2. **Phase 2 - æ ¸å¿ƒå¡ç‰‡**ï¼šå®žçŽ°è¿åŠ¨/å¥åº·åˆ‡æ¢å¡ç‰‡
3. **Phase 3 - é‡æž„çŽ°æœ‰å¡ç‰‡**ï¼šç¾ŽåŒ–å¹¶æ·»åŠ éšè—æŽ§åˆ¶
4. **Phase 4 - ä¸»å¡ç‰‡ä¸Žæˆå‘˜åŒºåŸŸ**ï¼šå®žçŽ°ç”¨æˆ·æ‘˜è¦å’Œæˆå‘˜æ¨ªæ¡
5. **Phase 5 - äº¤äº’ä¼˜åŒ–**ï¼šåŠ¨ç”»ã€æŒä¹…åŒ–ã€å“åº”å¼è°ƒæ•´

---

## è®¾è®¡é£Žæ ¼å‚è€ƒ

- **å¸ƒå±€é£Žæ ¼**ï¼šå¡ç‰‡å¼ä»ªè¡¨ç›˜ï¼ˆç±»ä¼¼ Garmin Appï¼‰
- **é…è‰²**ï¼šä¿æŒ Tailwind é»˜è®¤è‰²æ¿ï¼Œæ•°æ®çŠ¶æ€ä½¿ç”¨è¯­ä¹‰åŒ–é¢œè‰²
- **å›¾æ ‡**ï¼šLucide React å›¾æ ‡åº“
- **åŠ¨ç”»**ï¼šFramer Motion å¹³æ»‘è¿‡æ¸¡
